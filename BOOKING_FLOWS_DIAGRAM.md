# Schemat PrzepÅ‚ywÃ³w Rezerwacji - EnjoyHub

## PrzeglÄ…d SystemÃ³w

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STRONA GÅÃ“WNA ATRAKCJI                       â”‚
â”‚                   /attractions/[slug]                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ Pokazuje OBA widgety:
                              â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                           â”‚
                â–¼                           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ SYSTEM 1 (STARY)  â”‚       â”‚ SYSTEM 2 (NOWY)      â”‚
    â”‚ Pobyty            â”‚       â”‚ Sloty czasowe        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## SYSTEM 1: Rezerwacje PobytÃ³w (Stary System)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /attractions/[slug]                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ AvailabilityCalendarCard                                   â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  ğŸ“… Wybierz daty:                                         â”‚ â”‚
â”‚  â”‚  Check-in:  [2025-01-15]                                  â”‚ â”‚
â”‚  â”‚  Check-out: [2025-01-18]                                  â”‚ â”‚
â”‚  â”‚  GoÅ›cie:    [2]                                           â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  ğŸ’° Cena:                                                 â”‚ â”‚
â”‚  â”‚  3 noce Ã— 150 PLN = 450 PLN                              â”‚ â”‚
â”‚  â”‚  OpÅ‚ata serwisowa:  45 PLN                               â”‚ â”‚
â”‚  â”‚  SprzÄ…tanie:        25 PLN                               â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                â”‚ â”‚
â”‚  â”‚  Razem:            520 PLN                               â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  [Zarezerwuj]                                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ Server Action: createBooking()
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ lib/             â”‚
                    â”‚ booking-actions  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ INSERT INTO bookings
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Database:        â”‚
                    â”‚ bookings table   â”‚
                    â”‚                  â”‚
                    â”‚ booking_type:    â”‚
                    â”‚   'property'     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /booking-confirmation/[id]                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ âœ… Rezerwacja potwierdzona!                               â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚ Property: Apartament Centrum Warszawa                     â”‚ â”‚
â”‚  â”‚ Check-in: 2025-01-15                                      â”‚ â”‚
â”‚  â”‚ Check-out: 2025-01-18                                     â”‚ â”‚
â”‚  â”‚ GoÅ›cie: 2                                                 â”‚ â”‚
â”‚  â”‚ Razem: 520 PLN                                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Charakterystyka:**
- âœ… Wielodniowe pobyty
- âœ… PÅ‚atnoÅ›Ä‡ online
- âœ… Ceny sezonowe
- âœ… Blokowane daty
- ğŸ“Š Tabela: `bookings`

---

## SYSTEM 2: Rezerwacje SlotÃ³w (Nowy System)

### TRASA A: Z gÅ‚Ã³wnego widoku (SlotAvailabilityWidget)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /attractions/[slug]                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ SlotAvailabilityWidget                                     â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  ğŸ“… Wybierz datÄ™:                                         â”‚ â”‚
â”‚  â”‚  [Kalendarz - 2025-01-15]                                 â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  â° NastÄ™pny dostÄ™pny slot:                               â”‚ â”‚
â”‚  â”‚  ğŸ“… 15.01.2025                                            â”‚ â”‚
â”‚  â”‚  ğŸ• 10:00                                                 â”‚ â”‚
â”‚  â”‚  ğŸ’° Cena od: 50 PLN                                       â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  [Zarezerwuj]  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
                                             â”‚ router.push()
                                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /offers/[offerId]/book?date=2025-01-15&time=10:00             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Formularz Rezerwacji                                       â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  â„¹ï¸ Wybrane:                                               â”‚ â”‚
â”‚  â”‚  ğŸ“… 15.01.2025                                            â”‚ â”‚
â”‚  â”‚  ğŸ• 10:00 - 11:30                                         â”‚ â”‚
â”‚  â”‚  ğŸ“ Warszawa, Polska                                      â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  ğŸ‘¥ Liczba osÃ³b: [2]                                      â”‚ â”‚
â”‚  â”‚  ğŸ‘¤ ImiÄ™ i nazwisko: [________________]                   â”‚ â”‚
â”‚  â”‚  ğŸ“§ E-mail: [________________]                            â”‚ â”‚
â”‚  â”‚  ğŸ“± Telefon: [________________]                           â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  ğŸ’° Razem: 100 PLN (2 Ã— 50 PLN)                          â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  [PotwierdÅº rezerwacjÄ™]                                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ POST /api/bookings
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ API Route:       â”‚
                    â”‚ /api/bookings    â”‚
                    â”‚                  â”‚
                    â”‚ Walidacja:       â”‚
                    â”‚ - Offer aktywny  â”‚
                    â”‚ - DostÄ™pnoÅ›Ä‡     â”‚
                    â”‚ - Limit slotu    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ INSERT INTO offer_bookings
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Database:        â”‚
                    â”‚ offer_bookings   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /offers/bookings/[id]                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ âœ… Rezerwacja potwierdzona!                               â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚ Oferta: Zwiedzanie z przewodnikiem                        â”‚ â”‚
â”‚  â”‚ Data: 15.01.2025                                          â”‚ â”‚
â”‚  â”‚ Godzina: 10:00 - 11:30                                    â”‚ â”‚
â”‚  â”‚ Osoby: 2                                                  â”‚ â”‚
â”‚  â”‚ Razem: 100 PLN                                            â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚ ğŸ’³ PÅ‚atnoÅ›Ä‡ na miejscu                                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Charakterystyka:**
- ğŸ¯ Dwuetapowy proces (wybÃ³r â†’ formularz)
- âš¡ Automatyczny wybÃ³r pierwszego dostÄ™pnego slotu
- âŒ Brak wyboru preferowanej godziny
- ğŸ“„ Osobna strona potwierdzenia

---

### TRASA B: BezpoÅ›rednia (BookingWidget) â­ ZALECANA

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /offers/[id]                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ BookingWidget                                              â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  ğŸ“… Wybierz datÄ™:                                         â”‚ â”‚
â”‚  â”‚  [Kalendarz - 2025-01-15]                                 â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  â° DostÄ™pne godziny (15.01.2025):                        â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”                        â”‚ â”‚
â”‚  â”‚  â”‚10:00â”‚11:00â”‚12:00â”‚13:00â”‚14:00â”‚15:00â”‚                  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜                        â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”                        â”‚ â”‚
â”‚  â”‚  â”‚16:00â”‚17:00â”‚18:00â”‚19:00â”‚20:00â”‚peÅ‚neâ”‚                  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜                        â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  âœ… Wybrany slot: 14:00 - 15:30                           â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                    â”‚ â”‚
â”‚  â”‚  Dane rezerwacji:                                         â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  ğŸ‘¥ Liczba osÃ³b: [3]                                      â”‚ â”‚
â”‚  â”‚  ğŸ‘¤ ImiÄ™ i nazwisko: [Jan Kowalski]                       â”‚ â”‚
â”‚  â”‚  ğŸ“§ E-mail: [jan@example.com]                             â”‚ â”‚
â”‚  â”‚  ğŸ“± Telefon: [+48 123 456 789]                            â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                    â”‚ â”‚
â”‚  â”‚  Podsumowanie:                                            â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  Oferta: Zwiedzanie muzeum                                â”‚ â”‚
â”‚  â”‚  Data: 15.01.2025                                         â”‚ â”‚
â”‚  â”‚  Godzina: 14:00 - 15:30                                   â”‚ â”‚
â”‚  â”‚  Osoby: 3                                                 â”‚ â”‚
â”‚  â”‚  Do zapÅ‚aty: 150 PLN                                      â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  [PotwierdÅº rezerwacjÄ™]                                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ POST /api/bookings
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ API Route:       â”‚
                    â”‚ /api/bookings    â”‚
                    â”‚ (ten sam!)       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Database:        â”‚
                    â”‚ offer_bookings   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /offers/[id] (ten sam komponent)                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ âœ… Rezerwacja przyjÄ™ta!                                   â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  ğŸ“… 15.01.2025                                            â”‚ â”‚
â”‚  â”‚  ğŸ• 14:00 - 15:30                                         â”‚ â”‚
â”‚  â”‚  ğŸ‘¥ 3 osoby                                               â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  â„¹ï¸ PÅ‚atnoÅ›Ä‡ na miejscu                                   â”‚ â”‚
â”‚  â”‚  Przybycie 10 min przed godzinÄ…                          â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  [Dokonaj kolejnej rezerwacji]                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Charakterystyka:**
- âœ… Jednoetapowy proces (wszystko w jednym miejscu)
- âœ… WybÃ³r preferowanej godziny z dostÄ™pnych
- âœ… Lepsze UX (mniej klikniÄ™Ä‡)
- âœ… Success message inline (bez przekierowania)
- â­ **ZALECANY PRZEPÅYW**

---

## PorÃ³wnanie Tras Systemu 2

| Aspekt | TRASA A (SlotWidget) | TRASA B (BookingWidget) â­ |
|--------|---------------------|---------------------------|
| **Kroki** | 3 (widget â†’ formularz â†’ potwierdzenie) | 2 (widget+formularz â†’ success) |
| **WybÃ³r godziny** | âŒ Automatyczny | âœ… Manualny (siatka przyciskÃ³w) |
| **Przekierowania** | âœ… Tak (2Ã—) | âŒ Nie |
| **Widok slotÃ³w** | Tylko nastÄ™pny | Wszystkie dostÄ™pne |
| **UX** | Dobry | Bardzo dobry |
| **KompleksowoÅ›Ä‡** | WyÅ¼sza | NiÅ¼sza |
| **ElastycznoÅ›Ä‡** | Niska | Wysoka |

---

## WspÃ³lny Backend (System 2)

Obie trasy uÅ¼ywajÄ… tego samego API endpoint:

```
POST /api/bookings
Content-Type: application/json

{
  "offerId": "uuid",
  "date": "2025-01-15",
  "startTime": "14:00",
  "persons": 3,
  "customerName": "Jan Kowalski",
  "customerEmail": "jan@example.com",
  "customerPhone": "+48 123 456 789"
}
```

**Walidacja API:**
1. âœ… Oferta istnieje i jest aktywna
2. âœ… DzieÅ„ tygodnia ma konfiguracjÄ™ dostÄ™pnoÅ›ci
3. âœ… Godzina mieÅ›ci siÄ™ w oknie dostÄ™pnoÅ›ci
4. âœ… Slot nie jest zapeÅ‚niony (max_bookings_per_slot)
5. âœ… Wszystkie wymagane pola obecne
6. âœ… Poprawny format danych

---

## Konfiguracja DostÄ™pnoÅ›ci (System 2)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /admin/offers/[offerId]/availability                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ OfferAvailabilityManager                                   â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  DzieÅ„ tygodnia: [PoniedziaÅ‚ek â–¼]                         â”‚ â”‚
â”‚  â”‚  Godzina rozpoczÄ™cia: [10:00]                             â”‚ â”‚
â”‚  â”‚  Godzina zakoÅ„czenia: [20:00]                             â”‚ â”‚
â”‚  â”‚  DÅ‚ugoÅ›Ä‡ slotu (min): [90]                                â”‚ â”‚
â”‚  â”‚  Maks. rezerwacji/slot: [5]                               â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  [Zapisz ustawienia]                                       â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                     â”‚ â”‚
â”‚  â”‚  Wygenerowane sloty:                                      â”‚ â”‚
â”‚  â”‚  10:00-11:30 (maks 5 osÃ³b)                               â”‚ â”‚
â”‚  â”‚  11:30-13:00 (maks 5 osÃ³b)                               â”‚ â”‚
â”‚  â”‚  13:00-14:30 (maks 5 osÃ³b)                               â”‚ â”‚
â”‚  â”‚  14:30-16:00 (maks 5 osÃ³b)                               â”‚ â”‚
â”‚  â”‚  16:00-17:30 (maks 5 osÃ³b)                               â”‚ â”‚
â”‚  â”‚  17:30-19:00 (maks 5 osÃ³b)                               â”‚ â”‚
â”‚  â”‚  19:00-20:30 (maks 5 osÃ³b)                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Konfiguracja per dzieÅ„ tygodnia:**
- PoniedziaÅ‚ek: 10:00-20:00
- Wtorek: 10:00-20:00
- Åšroda: ZamkniÄ™te
- Czwartek: 12:00-18:00
- PiÄ…tek: 10:00-22:00
- Sobota: 09:00-23:00
- Niedziela: ZamkniÄ™te

---

## Rekomendacja Implementacji

### âœ… Zalecane RozwiÄ…zanie

```tsx
// W app/attractions/[slug]/page.tsx

// USUÅƒ lub ZAKOMENTUJ:
// <AvailabilityCalendarCard ... />  (jeÅ›li nie oferujesz pobytÃ³w)

// ZMIEÅƒ SlotAvailabilityWidget aby przekierowywaÅ‚ do:
<SlotAvailabilityWidget 
  propertyId={attraction.id}
  redirectTo="offers-page"  // zamiast "book-page"
/>

// LUB jeszcze lepiej - ulepsz SlotAvailabilityWidget
// aby dziaÅ‚aÅ‚ jak BookingWidget (pokazywaÅ‚ wszystkie godziny)
```

### ğŸ¯ Docelowy PrzepÅ‚yw

```
/attractions/[slug] â†’ SlotAvailabilityWidget (ulepszona wersja)
                      â†“
                      Pokazuje wszystkie dostÄ™pne godziny
                      Inline booking form
                      Success message
```

**KorzyÅ›ci:**
- âœ… Jedno miejsce rezerwacji
- âœ… PeÅ‚na kontrola uÅ¼ytkownika
- âœ… Mniej przekierowaÅ„
- âœ… Lepszy UX
- âœ… Szybsza konwersja

---

## Wsparcie Techniczne

### GÅ‚Ã³wne Pliki Do Modyfikacji

```
components/
  â”œâ”€â”€ slot-availability-widget.tsx     â† ZmieÅ„ logikÄ™ przekierowania
  â”œâ”€â”€ booking-widget.tsx                â† Wzoruj siÄ™ na tym komponencie
  â””â”€â”€ availability-calendar-card.tsx    â† RozwaÅ¼ usuniÄ™cie

app/
  â”œâ”€â”€ attractions/[slug]/page.tsx       â† Zaktualizuj komponenty
  â”œâ”€â”€ offers/[offerId]/book/page.tsx   â† MoÅ¼esz usunÄ…Ä‡
  â””â”€â”€ offers/[id]/page.tsx              â† Zachowaj jako gÅ‚Ã³wnÄ… trasÄ™

api/
  â””â”€â”€ bookings/route.ts                 â† Nie zmieniaj (dziaÅ‚a)
```

### PrzykÅ‚adowy Kod Zmiany

```tsx
// components/slot-availability-widget.tsx
const handleBooking = () => {
  if (slotData?.offerId) {
    // STARA WERSJA (dwuetapowa):
    // router.push(`/offers/${slotData.offerId}/book?date=${date}&time=${startTime}`)
    
    // NOWA WERSJA (jednoetapowa):
    router.push(`/offers/${slotData.offerId}`)
    
    // LUB jeszcze lepiej - pokaÅ¼ modal z BookingWidget
    // setShowBookingModal(true)
  }
}
```

---

## Podsumowanie

**Masz 2 systemy:**
1. ğŸ  **Pobyty** - dla wielodniowych rezerwacji (AvailabilityCalendarCard)
2. ğŸ« **Sloty** - dla rezerwacji czasowych (SlotAvailabilityWidget + BookingWidget)

**W systemie slotÃ³w masz 2 trasy:**
1. ğŸ“ **Trasa A** - SlotAvailabilityWidget â†’ /offers/[id]/book (z gÅ‚Ã³wnego widoku)
2. â­ **Trasa B** - /offers/[id] z BookingWidget (bezpoÅ›rednia, ZALECANA)

**Zalecenie:**
- UÅ¼yj Trasy B jako gÅ‚Ã³wnej
- Zmodyfikuj SlotAvailabilityWidget aby przekierowywaÅ‚ do Trasy B
- Albo ulepsz SlotAvailabilityWidget aby dziaÅ‚aÅ‚ jak BookingWidget
