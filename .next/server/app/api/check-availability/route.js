(()=>{var e={};e.id=78,e.ids=[78],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},54380:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>h,routeModule:()=>l,serverHooks:()=>v,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>x});var s={};t.r(s),t.d(s,{POST:()=>p});var i=t(96559),a=t(48088),o=t(37719),n=t(34386),u=t(44999),c=t(32190);async function p(e){try{let{propertyId:r,checkIn:t,checkOut:s}=await e.json();if(!r||!t||!s)return c.NextResponse.json({available:!1,error:"Missing required fields"},{status:400});let i=(0,u.UL)(),a=(0,n.createServerClient)(process.env.NEXT_PUBLIC_SUPABASE_URL,process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,{cookies:{getAll:()=>i.getAll(),setAll(e){try{e.forEach(({name:e,value:r,options:t})=>i.set(e,r,t))}catch{}}}}),{data:o,error:p}=await a.from("bookings").select("id").eq("property_id",r).in("status",["confirmed","pending"]).or(`check_in.lte.${s},check_out.gte.${t}`);if(p)return console.error("Availability check error:",p),c.NextResponse.json({available:!1,error:"Error checking availability"},{status:500});return c.NextResponse.json({available:0===o.length})}catch(e){return console.error("API error:",e),c.NextResponse.json({available:!1,error:"Internal server error"},{status:500})}}let l=new i.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/check-availability/route",pathname:"/api/check-availability",filename:"route",bundlePath:"app/api/check-availability/route"},resolvedPagePath:"/home/runner/work/EnjoyHubAI/EnjoyHubAI/app/api/check-availability/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:d,workUnitAsyncStorage:x,serverHooks:v}=l;function h(){return(0,o.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:x})}},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},78335:()=>{},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},96487:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[524,549,959],()=>t(54380));module.exports=s})();